# ElegantBook ä¸ Cleveref å…¼å®¹æ€§å¢å¼º

æœ¬é¡¹ç›®æ˜¯å¯¹ [ElegantBook](https://github.com/ElegantLaTeX/ElegantBook) æ–‡æ¡£ç±»çš„å¢å¼ºç‰ˆæœ¬ï¼Œä¸»è¦æ”¹è¿›äº†ä¸ `cleveref` å®åŒ…çš„å…¼å®¹æ€§ï¼Œå¹¶æ–°å¢äº†ä¸€äº›å®ç”¨åŠŸèƒ½ã€‚

## ä¸»è¦ç‰¹æ€§

### âœ¨ Cleveref å®Œå…¨æ”¯æŒ

åŸç‰ˆ ElegantBook ä¸ `cleveref` å®åŒ…å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œæœ¬ç‰ˆæœ¬å®Œå…¨è§£å†³ï¼š

- âœ… è‡ªåŠ¨é…ç½®æ‰€æœ‰å®šç†ç¯å¢ƒçš„å¼•ç”¨æ ¼å¼
- âœ… æ”¯æŒä¸­æ–‡è¿æ¥è¯ï¼ˆ"ä»¥åŠ"ã€"åˆ°"ã€"ã€"ï¼‰
- âœ… ç« èŠ‚å¼•ç”¨è‡ªåŠ¨ä½¿ç”¨ä¸­æ–‡æ•°å­—ï¼ˆ"ç¬¬ä¸€ç« "ã€"ç¬¬ä¸€åˆ°äº”ç« "ï¼‰
- âœ… è‡ªåŠ¨é…ç½®å›¾ã€è¡¨ã€å…¬å¼ã€é¡µç çš„ä¸­æ–‡æ ¼å¼
- âœ… æ”¯æŒæ ‡ç­¾å‰ç¼€æ˜ å°„ï¼ˆ`thm:`ã€`def:`ã€`lem:` ç­‰ï¼‰

### ğŸ”¢ å®šç†ç¯å¢ƒè¿ç»­ç¼–å·

æ‰€æœ‰å®šç†ç±»ç¯å¢ƒï¼ˆå®šç†ã€å®šä¹‰ã€å¼•ç†ã€å‘½é¢˜ã€æ¨è®ºç­‰ï¼‰å®ç°è¿ç»­ç¼–å·ï¼š

| åŸç‰ˆè¡Œä¸º | æ”¹è¿›å |
|---------|--------|
| å®šç† 1.1, 1.2, 1.3... | å®šç† 1.1 |
| å®šä¹‰ 1.1, 1.2, 1.3...ï¼ˆç‹¬ç«‹ï¼‰ | å®šä¹‰ 1.2ï¼ˆè¿ç»­ï¼‰ |
| å¼•ç† 1.1, 1.2, 1.3...ï¼ˆç‹¬ç«‹ï¼‰ | å¼•ç† 1.3ï¼ˆè¿ç»­ï¼‰ |

**ç¼–å·é€‰é¡¹**ï¼š
- `chapter`ï¼ˆé»˜è®¤ï¼‰ï¼šæŒ‰ç« ç¼–å·ï¼ˆ1.1, 1.2, 1.3...ï¼‰
- `section`ï¼šæŒ‰èŠ‚ç¼–å·ï¼ˆ1.1.1, 1.1.2, 1.2.1...ï¼‰

### ğŸ“ Problemset ç¯å¢ƒå¢å¼º

1. **å…¬å¼ç¼–å·ç‹¬ç«‹**ï¼š`problemset` ç¯å¢ƒä¸­çš„å…¬å¼ç¼–å·ç‹¬ç«‹äºæ­£æ–‡ï¼Œè‡ªåŠ¨é‡ç½®ä¸º (1), (2), (3)...

2. **ç­”æ¡ˆéšè—åŠŸèƒ½**ï¼šä½¿ç”¨ `noanswer` é€‰é¡¹å¯éšè— `problemset` ä¸­çš„ `solution` ç¯å¢ƒï¼Œæ–¹ä¾¿ç”Ÿæˆä¹ é¢˜å†Œå’Œç­”æ¡ˆå†Œä¸¤ä¸ªç‰ˆæœ¬ã€‚

### ğŸ¨ æ–°å¢ attention ç¯å¢ƒ

æ–°å¢ `attention` ç¯å¢ƒç”¨äºå¼ºè°ƒé‡è¦å†…å®¹ï¼Œæ”¯æŒå¤šè¯­è¨€ï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€å¾·è¯­ã€æ³•è¯­ã€æ—¥è¯­ç­‰ï¼‰ã€‚

## å¿«é€Ÿå¼€å§‹

> ğŸ’¡ **æ–°æ‰‹æç¤º**ï¼šæŸ¥çœ‹ [QUICK_START.md](QUICK_START.md) è·å– 5 åˆ†é’Ÿå¿«é€Ÿå…¥é—¨æŒ‡å—ã€‚

### æŸ¥çœ‹ç¤ºä¾‹

è¿è¡Œ `EXAMPLE.tex` æŸ¥çœ‹å®Œæ•´åŠŸèƒ½æ¼”ç¤ºï¼š

```bash
xelatex EXAMPLE.tex
xelatex EXAMPLE.tex  # ç¬¬äºŒæ¬¡ç¼–è¯‘ç”Ÿæˆæ­£ç¡®çš„äº¤å‰å¼•ç”¨
```

ç¤ºä¾‹åŒ…å«ï¼š
- å®šç†ç¯å¢ƒçš„ä½¿ç”¨å’Œè¿ç»­ç¼–å·
- å„ç§ç±»å‹çš„å¼•ç”¨ï¼ˆç« ã€èŠ‚ã€å›¾ã€è¡¨ã€å…¬å¼ã€å®šç†ï¼‰
- Problemset ç¯å¢ƒå’Œç­”æ¡ˆéšè—
- è‡ªå®šä¹‰å®šç†ç¯å¢ƒ
- é™„å½•é…ç½®

### æç®€å¯¼è¨€åŒº

```latex
\documentclass[cn,scheme=chinese,mode=fancy]{elegantbook}
\usepackage[nameinlink,capitalize]{cleveref}

\begin{document}

\chapter{å¼•è¨€}\label{chap:intro}

\begin{theorem}{å‹¾è‚¡å®šç†}{pyth}
åœ¨ç›´è§’ä¸‰è§’å½¢ä¸­ï¼Œ$a^2 + b^2 = c^2$ã€‚
\end{theorem}

\begin{definition}{ç´ æ•°}{prime}
å¤§äº 1 ä¸”åªèƒ½è¢« 1 å’Œè‡ªèº«æ•´é™¤çš„è‡ªç„¶æ•°ã€‚
\end{definition}

å‚è§ \cref{thm:pyth,def:prime}ã€‚
% è¾“å‡ºï¼šå‚è§å®šç† 1.1 ä»¥åŠå®šä¹‰ 1.2

\end{document}
```

### è‡ªåŠ¨é…ç½®çš„å¼•ç”¨æ ¼å¼

ä»¥ä¸‹æ ¼å¼å·²è‡ªåŠ¨é…ç½®ï¼Œ**æ— éœ€æ‰‹åŠ¨è®¾ç½®**ï¼š

```latex
% ç« èŠ‚å¼•ç”¨ï¼ˆä½¿ç”¨ä¸­æ–‡æ•°å­—ï¼‰
\cref{chap:1}                              % ç¬¬ä¸€ç« 
\cref{sec:1-1}                             % ç¬¬1.1èŠ‚
\cref{chap:1,chap:2,chap:3,chap:4,chap:5}  % ç¬¬ä¸€åˆ°äº”ç« 

% å›¾è¡¨å…¬å¼å¼•ç”¨
\cref{fig:1}        % å›¾ 1.1
\cref{tab:1}        % è¡¨ 1.1
\cref{eq:1}         % å¼ (1.1)
\cref{page:1}       % ç¬¬5é¡µ

% å®šç†ç¯å¢ƒå¼•ç”¨
\cref{thm:1}        % å®šç† 1.1
\cref{def:1}        % å®šä¹‰ 1.2
\cref{lem:1}        % å¼•ç† 1.3
\cref{prop:1}       % å‘½é¢˜ 1.4
```

## å¸¸è§ç”¨æ³•

### 1. æŒ‰èŠ‚ç¼–å·å®šç†

```latex
\documentclass[cn,mode=fancy,section]{elegantbook}
% å®šç†ç¼–å·ï¼š1.1.1, 1.1.2ï¼ˆç¬¬1ç« ç¬¬1èŠ‚ï¼‰
%           1.2.1, 1.2.2ï¼ˆç¬¬1ç« ç¬¬2èŠ‚ï¼‰
```

### 2. é™„å½•å¼•ç”¨é…ç½®

```latex
\usepackage{etoolbox}

% é…ç½®é™„å½•æ ¼å¼
\crefname{appchapter}{é™„å½•}{é™„å½•}
\crefformat{appchapter}{#2é™„å½•~#1#3}

% åœ¨ \appendix å‰åˆ‡æ¢
\pretocmd{\appendix}{\crefalias{chapter}{appchapter}}{}{}
```

æ•ˆæœï¼š
- æ­£æ–‡ï¼š`\cref{chap:1}` â†’ "ç¬¬ä¸€ç« "
- é™„å½•ï¼š`\cref{appx:A}` â†’ "é™„å½• A"

### 3. ä¹ é¢˜å†Œåˆ¶ä½œ

```latex
% ä¹ é¢˜å†Œç‰ˆæœ¬ï¼ˆæ— ç­”æ¡ˆï¼‰
\documentclass[cn,mode=fancy,noanswer]{elegantbook}

% ç­”æ¡ˆå†Œç‰ˆæœ¬ï¼ˆæœ‰ç­”æ¡ˆï¼‰
\documentclass[cn,mode=fancy]{elegantbook}

\begin{problemset}
\item æ±‚è§£ $x^2 = 4$

\begin{solution}
$x = \pm 2$  % noanswer æ¨¡å¼ä¸‹ä¸æ˜¾ç¤º
\end{solution}
\end{problemset}
```

### 4. è‡ªå®šä¹‰å®šç†ç¯å¢ƒ

```latex
\elegantnewtheorem{conjecture}{çŒœæƒ³}{prostyle}{conj}[theorem]

\begin{conjecture}{Goldbach çŒœæƒ³}{goldbach}
ä»»ä½•å¤§äº 2 çš„å¶æ•°éƒ½å¯è¡¨ç¤ºä¸ºä¸¤ä¸ªç´ æ•°ä¹‹å’Œã€‚
\end{conjecture}

\cref{conj:goldbach}  % è‡ªåŠ¨é…ç½®ï¼Œè¾“å‡ºï¼šçŒœæƒ³ 1.5
```

## æ–‡æ¡£ç±»é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `chapter` | å®šç†æŒ‰ç« ç¼–å·ï¼ˆé»˜è®¤ï¼‰ | `\documentclass[cn,mode=fancy]{elegantbook}` |
| `section` | å®šç†æŒ‰èŠ‚ç¼–å· | `\documentclass[cn,mode=fancy,section]{elegantbook}` |
| `answer` | æ˜¾ç¤ºç­”æ¡ˆï¼ˆé»˜è®¤ï¼‰ | `\documentclass[cn,mode=fancy]{elegantbook}` |
| `noanswer` | éšè— problemset ä¸­çš„ç­”æ¡ˆ | `\documentclass[cn,mode=fancy,noanswer]{elegantbook}` |

## æŠ€æœ¯è¯´æ˜

### è¿ç»­ç¼–å·å®ç°

- æ‰€æœ‰å®šç†ç¯å¢ƒä½¿ç”¨å…±äº«è®¡æ•°å™¨ `tcb@cnt@theorem`
- é€šè¿‡ `use counter=tcb@cnt@theorem` å®ç°è¿ç»­ç¼–å·
- æ”¯æŒé€šè¿‡ `usesamecnt` é€‰é¡¹æ¢å¤ç‹¬ç«‹ç¼–å·

### Cleveref é…ç½®

- ä½¿ç”¨ `label type` ä¸ºæ¯ä¸ªç¯å¢ƒè®¾ç½®ç±»å‹
- é€šè¿‡ `\crefalias` æ˜ å°„æ ‡ç­¾å‰ç¼€åˆ°ç¯å¢ƒç±»å‹
- è‡ªåŠ¨é…ç½® `\crefname`ã€`\crefformat`ã€`\crefrangeformat`ã€`\crefmultiformat`
- ä¸­æ–‡æ¨¡å¼ä¸‹è‡ªåŠ¨è®¾ç½®è¿æ¥è¯

### Problemset å¢å¼º

- è¿›å…¥ç¯å¢ƒæ—¶ä¿å­˜å¹¶é‡ç½®å…¬å¼è®¡æ•°å™¨
- ç¦»å¼€ç¯å¢ƒæ—¶æ¢å¤åŸè®¡æ•°å™¨å€¼
- ä½¿ç”¨ `\renewenvironment` æ¡ä»¶æ€§éšè— solution

## å…¼å®¹æ€§

- âœ… **å‘åå…¼å®¹**ï¼šå®Œå…¨ä¿ç•™åŸç‰ˆ ElegantBook åŠŸèƒ½
- âœ… **è¯­æ³•å…¼å®¹**ï¼šç°æœ‰æ–‡æ¡£æ— éœ€ä¿®æ”¹
- âš ï¸ **ç¼–å·å˜åŒ–**ï¼šé»˜è®¤å¯ç”¨è¿ç»­ç¼–å·ï¼ˆå¯é€šè¿‡ `usesamecnt=true` æ¢å¤ç‹¬ç«‹ç¼–å·ï¼‰

## ç‰ˆæœ¬ä¿¡æ¯

- **åŸºäºç‰ˆæœ¬**ï¼šElegantBook v4.5 (2022/12/31)
- **å¢å¼ºæ—¥æœŸ**ï¼š2025/01/28
- **å…¼å®¹æ€§**ï¼šXeLaTeX / LuaLaTeX

## æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `elegantbook.cls` | å¢å¼ºç‰ˆæ–‡æ¡£ç±» |
| `elegantbook.cls.original` | åŸç‰ˆå¤‡ä»½ |
| `EXAMPLE.tex` | å®Œæ•´åŠŸèƒ½æ¼”ç¤ºç¤ºä¾‹ |
| `QUICK_START.md` | 5 åˆ†é’Ÿå¿«é€Ÿå…¥é—¨ |
| `README.md` | å®Œæ•´è¯´æ˜æ–‡æ¡£ |
| `CHANGELOG.md` | ç‰ˆæœ¬æ›´æ–°æ—¥å¿— |

## è‡´è°¢

æ„Ÿè°¢ [ElegantLaTeX](https://github.com/ElegantLaTeX) å›¢é˜Ÿå¼€å‘çš„ä¼˜ç§€æ–‡æ¡£ç±»ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®ç»§æ‰¿åŸ ElegantBook çš„è®¸å¯è¯ï¼Œå¯è‡ªç”±åˆ†å‘å’Œä¿®æ”¹ã€‚

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®æ˜¯å¯¹åŸç‰ˆ ElegantBook çš„å¢å¼ºï¼Œéå®˜æ–¹ç‰ˆæœ¬ã€‚å¦‚éœ€åŸç‰ˆï¼Œè¯·è®¿é—® [ElegantBook å®˜æ–¹ä»“åº“](https://github.com/ElegantLaTeX/ElegantBook)ã€‚
